<% 	@player_win_pct = []
	  @player_tourneys = []
	  @tournament.players.each do |p|
			player_wins = PlayerMatch.where(player: p, result: "Win", match: Match.where(manager: tournament)).count
			player_losses = PlayerMatch.where(player: p, result: "Loss", match: Match.where(manager: tournament)).count
			if player_losses <= 0
				player_losses = 1
			end
			@player_win_pct << player_wins.to_f/(player_wins+player_losses)
			@player_tourneys << PlayerTournament.where(player: p, tournament: tournament)
		end
		for w in 0..@player_win_pct.length-2
			if @player_win_pct[w] < @player_win_pct[w+1] 
				tmp = @player_win_pct[w]
				tmp2 = @player_tourneys[w]
				@player_win_pct.delete_at(w)
				@player_tourneys.delete_at(w)
				@player_win_pct.insert(w+1, tmp)
				@player_tourneys.insert(w+1, tmp2)
			end
		end 	 	
%>
<div class="table table-responsive">
	<table class="table">
		<thead>
			<tr>
				<th>Place</th>
				<th>Player</th>
				<th>Wins</th>
				<th>Losses</th>
				<th>Win %</th>
			</tr>
		</thead>
		<tbody>
			<% i = 0 %>
			<% @player_tourneys.each do |pt|
					 @win_count = PlayerMatch.where(player: pt.first.player,
			   		 match: Match.where(manager: tournament),
			   		 result: "Win").count 

 						@loss_count = PlayerMatch.where(player: pt.first.player,
			   			 match: Match.where(manager: tournament),
			    		result: "Loss").count 
			%>
			<tr>
				<td>?</td><!-- e.g. '1st' (as in '1st place') -->
				<td><%=link_to pt.first.player.name, pt.first.player%></td>
				<td><%=@win_count%></td>
				<td><%=@loss_count%></td>
				<td><%=@player_win_pct[i]%></td>
			</tr>
			<% i += 1 %>
			<% end %>
		</tbody>
	</table>
</div>
